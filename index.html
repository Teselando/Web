<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Teselando</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="Graphics/Logo.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Preloader Splash Screen -->
  <div class="preloader" id="preloader">
    <div class="preloader-content">
      <img src="Graphics/Logo.png" alt="Teselando" class="preloader-logo">
      <p class="preloader-glitch" id="glitchText">Teselando</p>
    </div>
  </div>

  <header class="topbar">
    <div class="logo">
      <img class="logo-mark" src="Graphics/Logo.png" alt="Teselando">
      Teselando
    </div>
    <nav class="nav-links">
      <a href="#tracks">Áreas</a>
      <a href="#how">Metodología</a>
      <a href="#pricing">Precios</a>
      <a href="#philosophy">Filosofía</a>
      <a href="divulgacion.html">Divulgación</a>
      <a href="#contact">Contacto</a>
    </nav>
  </header>

  <main>
    <section class="hero" id="top">
      <div class="hero-grid">
        <div class="hero-copy">
          <div class="badge">Academia online premium · 1 a 1</div>
          <h1 class="reveal-text">
            <span class="reveal-line">Comprende de verdad</span>
            <span class="reveal-line">lo que estudias.</span>
          </h1>
          <p class="hero-main reveal-text">
            <span class="reveal-line">Clases 1 a 1 en Matemáticas, Estadística, Programación</span>
            <span class="reveal-line">y Contabilidad. Sesiones por Discord adaptadas a tu nivel.</span>
          </p>
          <div class="hero-actions reveal-text">
            <a class="btn primary" href="#contact">Reservar una sesión</a>
            <a class="btn ghost" href="#how">Ver cómo funciona</a>
          </div>

          <div class="subject-strip">
            <span>Matemáticas</span>
            <span>Estadística</span>
            <span>Programación</span>
            <span>Contabilidad</span>
          </div>

          <!-- Phone Number Form -->
          <form id="phoneForm" class="phone-form reveal-text" style="animation-delay: 0.9s;">
            <div class="form-group">
              <input
                type="tel"
                id="phoneInput"
                name="phone"
                placeholder="Tu número de teléfono"
                required
                pattern="[0-9\-\+\(\)\s]+"
              >
              <button type="submit" class="form-submit">Enviar</button>
            </div>
            <p id="formMessage" class="form-message"></p>
          </form>
        </div>

        <div class="hero-visual" aria-hidden="true">
          <div class="visual-card large">
            <img class="visual-icon" src="Graphics/Birrete.png" alt="">
            <div class="visual-title">Clases 1 a 1</div>
            <div class="visual-body">Un estudiante, un experto. Atención completa en cada sesión.</div>
            <div class="visual-metric">100% foco</div>
          </div>
          <div class="visual-card small">
            <img class="visual-icon" src="Graphics/Pregunta.png" alt="">
            <div class="visual-title">Seguimiento real</div>
            <div class="visual-body">Detectamos puntos débiles y ajustamos tu ruta.</div>
          </div>
          <div class="visual-card small accent">
            <img class="visual-icon" src="Graphics/Columna.png" alt="">
            <div class="visual-title">Flexibilidad total</div>
            <div class="visual-body">Tú eliges horario y frecuencia.</div>
          </div>
        </div>
      </div>
      <div class="hero-glow"></div>
    </section>

    <section class="tracks" id="tracks">
      <div class="section-head">
        <h2>Áreas de aprendizaje</h2>
        <p>Clases personalizadas según tu plan de estudios, tu nivel y tu ritmo.</p>
      </div>
      <div class="track-grid">
        <article class="track-card">
          <h3>Matemáticas</h3>
          <p>Álgebra, cálculo, análisis y fundamentos sólidos.</p>
          <span class="pill">Comprender primero</span>
        </article>
        <article class="track-card">
          <h3>Estadística</h3>
          <p>Probabilidad, inferencia y modelos explicados con claridad.</p>
          <span class="pill">Aplicable y práctico</span>
        </article>
        <article class="track-card">
          <h3>Programación</h3>
          <p>De lógica básica a proyectos reales, con guía paso a paso.</p>
          <span class="pill">Código con sentido</span>
        </article>
        <article class="track-card">
          <h3>Contabilidad</h3>
          <p>Principios, registros y análisis financiero sin memorizar.</p>
          <span class="pill">Conceptos claros</span>
        </article>
      </div>
    </section>

    <section class="how" id="how">
      <div class="section-head">
        <h2>Metodología Teselando</h2>
        <p>Aprendizaje profundo, con seguimiento real y sesiones 1 a 1 por Discord.</p>
      </div>
      <div class="steps">
        <div class="step">
          <div class="step-number">01</div>
          <h3>Diagnóstico</h3>
          <p>Revisamos tu contexto, objetivos y puntos débiles.</p>
        </div>
        <div class="step">
          <div class="step-number">02</div>
          <h3>Clases personalizadas</h3>
          <p>Sesiones adaptadas a tu nivel y a tu plan de estudios.</p>
        </div>
        <div class="step">
          <div class="step-number">03</div>
          <h3>Seguimiento continuo</h3>
          <p>Ajustamos el plan según tu progreso y necesidades reales.</p>
        </div>
      </div>
    </section>

    <section class="pricing" id="pricing">
      <div class="section-head">
        <h2>Precios claros</h2>
        <p>Pagas por lo que necesitas, con transparencia y sin compromisos innecesarios.</p>
      </div>
      <div class="pricing-grid">
        <article class="pricing-card">
          <h3>Primer mes</h3>
          <div class="price">€15<span>/hora</span></div>
          <ul class="pricing-list">
            <li>Sesiones 1 a 1 por Discord</li>
            <li>Diagnóstico inicial y plan base</li>
            <li>Flexibilidad total de horarios</li>
          </ul>
          <a class="btn primary" href="#contact">Quiero empezar</a>
        </article>
        <article class="pricing-card highlight">
          <div class="tag">Continuidad</div>
          <h3>Desde el segundo mes</h3>
          <div class="price">€20<span>/hora</span></div>
          <ul class="pricing-list">
            <li>Seguimiento continuo y ajustes</li>
            <li>Profundización en tus temas</li>
            <li>Cupos limitados para máxima calidad</li>
          </ul>
          <a class="btn ghost" href="#contact">Reservar cupo</a>
        </article>
      </div>
    </section>

    <section class="trustpilot" id="trustpilot">
      <div class="trustpilot-card">
        <div class="trustpilot-score">
          <div class="score-value" id="tp-score">—</div>
          <div class="score-label">TrustScore</div>
        </div>
        <div class="trustpilot-meta">
          <div class="trustpilot-stars" id="tp-stars">★★★★★</div>
          <div class="score-text" id="tp-text">Cargando puntuación en Trustpilot...</div>
          <div class="score-reviews">Basado en <span id="tp-count">—</span> opiniones</div>
          <a class="trustpilot-link" href="https://www.trustpilot.com/review/teselando.es" target="_blank" rel="noopener">
            Ver en Trustpilot
          </a>
        </div>
      </div>
    </section>

    <section class="philosophy" id="philosophy">
      <div class="section-head">
        <h2>Nuestra filosofía</h2>
        <p>Entender primero. Aprobar es la consecuencia.</p>
      </div>
      <div class="philosophy-grid">
        <article class="philosophy-card">
          <h3>Aprendizaje profundo</h3>
          <p>No memorizar, sino comprender. Explicaciones claras y precisas.</p>
        </article>
        <article class="philosophy-card">
          <h3>Humano y cercano</h3>
          <p>Profesores reales, acompañamiento real y clases individuales.</p>
        </article>
        <article class="philosophy-card">
          <h3>Flexible y sostenible</h3>
          <p>Tu vida primero. Tú decides horarios y ritmo.</p>
        </article>
      </div>
    </section>

    <section class="ecosystem" id="ecosystem">
      <div class="ecosystem-card">
        <div class="ecosystem-copy">
          <h2>Más que una academia</h2>
          <p>Reinvertimos parte de lo que ganamos en contenido educativo, eventos presenciales y proyectos de divulgación matemática.</p>
          <div class="ecosystem-tags">
            <span>Contenido educativo</span>
            <span>Eventos en persona</span>
            <span>Divulgación y documentales</span>
          </div>
        </div>
        <div class="ecosystem-media">
          <img src="Graphics/Youtube.png" alt="Contenido educativo Teselando">
        </div>
      </div>
    </section>

    <section class="cta" id="contact">
      <div class="cta-card">
        <h2>¿Listo para entender de verdad?</h2>
        <p>Escríbenos y coordinamos tu primera sesión. Cupos limitados para garantizar calidad.</p>
        <a class="btn primary" href="#contact">Agendar una llamada</a>
      </div>
    </section>
  </main>

  <script>
    // Wrap each letter in a span for individual animation
    const glitchText = document.getElementById('glitchText');
    const text = glitchText.textContent;
    glitchText.innerHTML = '';

    text.split('').forEach((letter) => {
      const span = document.createElement('span');
      span.textContent = letter;
      span.className = 'glitch-letter';
      // Random delay between 0.6s and 1.35s for random disappearance
      const randomDelay = 0.6 + Math.random() * 0.75;
      span.style.animationDelay = `${randomDelay}s`;
      glitchText.appendChild(span);
    });

    window.addEventListener('load', () => {
      const preloader = document.getElementById('preloader');
      setTimeout(() => {
        preloader.classList.add('fade-out');
        setTimeout(() => {
          preloader.style.display = 'none';
        }, 600);
      }, 1200);
    });

    // Phone Form Handler
    const phoneForm = document.getElementById('phoneForm');
    const phoneInput = document.getElementById('phoneInput');
    const formMessage = document.getElementById('formMessage');

    phoneForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      const phone = phoneInput.value.trim();

      if (!phone) {
        showMessage('Por favor ingresa tu número de teléfono', 'error');
        return;
      }

      // Show loading state
      const submitBtn = phoneForm.querySelector('.form-submit');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando...';

      try {
        // Replace with your Google Apps Script URL
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzohkHxYC_3aBW2E8QC71xFyoW-kpBwZPXRVuXjwUTmZgKtwiPHUq4adRuLs-pV0r1XHA/exec';

        await fetch(scriptURL, {
          method: 'POST',
          body: new FormData(phoneForm),
          mode: 'no-cors'
        });

        showMessage('¡Teléfono enviado exitosamente! Nos pondremos en contacto pronto.', 'success');
        phoneInput.value = '';

      } catch (error) {
        console.error('Error:', error);
        showMessage('Hubo un error al enviar tu teléfono. Intenta nuevamente.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    function showMessage(message, type) {
      formMessage.textContent = message;
      formMessage.className = 'form-message ' + type;

      if (type === 'success') {
        setTimeout(() => {
          formMessage.textContent = '';
          formMessage.className = 'form-message';
        }, 5000);
      }
    }

    async function loadTrustpilotScore() {
      const trustpilotUrl = 'https://www.trustpilot.com/review/teselando.es';
      const cacheBust = Date.now();
      const proxyUrls = [
        `https://r.jina.ai/http://https://www.trustpilot.com/review/teselando.es?cache=${cacheBust}`,
        `https://api.allorigins.win/raw?url=${encodeURIComponent(trustpilotUrl + '?cache=' + cacheBust)}`
      ];

      const scoreEl = document.getElementById('tp-score');
      const countEl = document.getElementById('tp-count');
      const textEl = document.getElementById('tp-text');
      const starsEl = document.getElementById('tp-stars');

      try {
        let pageText = null;
        for (const url of proxyUrls) {
          try {
            const response = await fetch(url);
            if (!response.ok) {
              continue;
            }
            pageText = await response.text();
            if (pageText) {
              break;
            }
          } catch (error) {
            // Try next proxy
          }
        }

        if (!pageText) {
          throw new Error('Trustpilot fetch failed');
        }

        const normalized = pageText.replace(/\u00a0/g, ' ').replace(/\s+/g, ' ');
        const scoreMatch = normalized.match(/trustscore[^0-9]*([0-9](?:[.,][0-9])?)/i) ||
          normalized.match(/ratingvalue[^0-9]*([0-9](?:[.,][0-9])?)/i);
        const countMatch = normalized.match(/([0-9][0-9.,]*)\s+(opiniones|reviews)/i) ||
          normalized.match(/reviewcount[^0-9]*([0-9]+)/i) ||
          normalized.match(/numberofreviews[^0-9]*([0-9]+)/i);

        const scoreValue = scoreMatch ? parseFloat(scoreMatch[1].replace(',', '.')) : null;
        const countValue = countMatch ? countMatch[1].replace(/[^\d]/g, '') : null;

        if (scoreValue) {
          scoreEl.textContent = scoreValue.toFixed(1);
          textEl.textContent = 'Puntuación promedio en Trustpilot';
          const rounded = Math.max(1, Math.min(5, Math.round(scoreValue)));
          starsEl.textContent = '★★★★★'.slice(0, rounded) + '☆☆☆☆☆'.slice(0, 5 - rounded);
        } else {
          textEl.textContent = 'Visita nuestra página en Trustpilot';
        }

        if (countValue) {
          countEl.textContent = countValue;
        } else {
          countEl.textContent = '—';
        }
      } catch (error) {
        textEl.textContent = 'Visita nuestra página en Trustpilot';
      }
    }

    loadTrustpilotScore();
  </script>

  <script>
    (function(w,d,s,r,n){
      w.TrustpilotObject=n;
      w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments)};
      const a=d.createElement(s);a.async=1;a.src=r;a.type='text/java'+s;
      const f=d.getElementsByTagName(s)[0];
      f.parentNode.insertBefore(a,f);
    })(window,document,'script','https://invitejs.trustpilot.com/tp.min.js','tp');
    tp('register', 'RTYVS1sdxWNxDoO9');
  </script>

  <script type="text/javascript" src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js" async></script>

</body>
</html>
