<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Teselando</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Preloader Splash Screen -->
  <div class="preloader" id="preloader">
    <div class="preloader-content">
      <img src="Graphics/Logo.png" alt="Teselando" class="preloader-logo">
      <p class="preloader-glitch" id="glitchText">Teselando</p>
    </div>
  </div>

  <section class="hero">
    <div class="hero-content">
      <h1 class="reveal-text">
        <span class="reveal-line">Teselando</span>
      </h1>
      <p class="hero-main reveal-text">
        <span class="reveal-line">Diseño y tecnología para proyectos con intención.</span>
      </p>
      <p class="hero-sub reveal-text">
        <span class="reveal-line">Ideas bien pensadas, bien ejecutadas.</span>
      </p>
      
      <!-- Phone Number Form -->
      <form id="phoneForm" class="phone-form reveal-text" style="animation-delay: 1.1s;">
        <div class="form-group">
          <input 
            type="tel" 
            id="phoneInput" 
            name="phone" 
            placeholder="Tu número de teléfono" 
            required
            pattern="[0-9\-\+\(\)\s]+"
          >
          <button type="submit" class="form-submit">Enviar</button>
        </div>
        <p id="formMessage" class="form-message"></p>
      </form>
    </div>
  </section>

  <script>
    // Wrap each letter in a span for individual animation
    const glitchText = document.getElementById('glitchText');
    const text = glitchText.textContent;
    glitchText.innerHTML = '';
    
    text.split('').forEach((letter) => {
      const span = document.createElement('span');
      span.textContent = letter;
      span.className = 'glitch-letter';
      // Random delay between 0.8s and 2.3s for random disappearance
      const randomDelay = 0.8 + Math.random() * 1.5;
      span.style.animationDelay = `${randomDelay}s`;
      glitchText.appendChild(span);
    });

    window.addEventListener('load', () => {
      const preloader = document.getElementById('preloader');
      setTimeout(() => {
        preloader.classList.add('fade-out');
        setTimeout(() => {
          preloader.style.display = 'none';
        }, 600);
      }, 3000);
    });

    // Phone Form Handler
    const phoneForm = document.getElementById('phoneForm');
    const phoneInput = document.getElementById('phoneInput');
    const formMessage = document.getElementById('formMessage');

    phoneForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const phone = phoneInput.value.trim();
      
      if (!phone) {
        showMessage('Por favor ingresa tu número de teléfono', 'error');
        return;
      }

      // Show loading state
      const submitBtn = phoneForm.querySelector('.form-submit');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando...';

      try {
        // Replace with your Google Apps Script URL
        const scriptURL = 'https://script.google.com/a/macros/teselando.es/s/AKfycbzohkHxYC_3aBW2E8QC71xFyoW-kpBwZPXRVuXjwUTmZgKtwiPHUq4adRuLs-pV0r1XHA/exec';
        
        const response = await fetch(scriptURL, {
          method: 'POST',
          body: new FormData(phoneForm),
          mode: 'no-cors'
        });

        showMessage('¡Teléfono enviado exitosamente! Nos pondremos en contacto pronto.', 'success');
        phoneInput.value = '';
        
      } catch (error) {
        console.error('Error:', error);
        showMessage('Hubo un error al enviar tu teléfono. Intenta nuevamente.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    function showMessage(message, type) {
      formMessage.textContent = message;
      formMessage.className = 'form-message ' + type;
      
      if (type === 'success') {
        setTimeout(() => {
          formMessage.textContent = '';
          formMessage.className = 'form-message';
        }, 5000);
      }
    }
  </script>

</body>
</html>
